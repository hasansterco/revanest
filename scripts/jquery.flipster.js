!function(e){e.fn.flipster=function(t){var n=e.extend({},{itemContainer:"ul",itemSelector:"li",style:"coverflow",start:"center",enableKeyboard:!0,enableMousewheel:!0,enableTouch:!0,enableNav:!1,enableNavButtons:!1,onItemSwitch:function(){}},t),l=e(window);return this.each(function(){var t,a,s,r,f,o,c=e(this),p=0,h=0,d=0;function u(){d=0}function v(){t.css("height",a.height()),c.css("height","auto"),"carousel"===n.style&&t.width(a.width())}function g(){n.enableNav&&a.length>1&&(currentItem=e(a[p]),s.find(".flip-nav-current").removeClass("flip-nav-current"),r.filter("[href='#"+currentItem.attr("id")+"']").addClass("flip-nav-current"),r.filter("[data-flip-category='"+currentItem.data("flip-category")+"']").parent().addClass("flip-nav-current"))}function m(){var l=e(a[p]).addClass("flip-current");if(a.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition"),"carousel"===n.style){a.addClass("flip-hidden");var s=e(a[p+1]),r=e(a[p+2]),f=e(a[p-1]),c=e(a[p-2]);0===p?c=(f=a.last()).prev():1===p?c=a.last():p===a.length-2?r=a.first():p===a.length-1&&(s=a.first(),r=e(a[1])),r.removeClass("flip-hidden").addClass("flip-future"),c.removeClass("flip-hidden").addClass("flip-past"),s.removeClass("flip-hidden").addClass("flip-next"),f.removeClass("flip-hidden").addClass("flip-prev")}else{var h=l.outerWidth()/2,d=t.width(),u=l.outerWidth(),m=a.index(l)*u/2+h/2;for(a.removeClass("flip-hidden"),i=0;i<a.length;i++){var y=e(a[i]),C=y.outerWidth();i<p?y.addClass("flip-past").css({"z-index":i,left:i*C/2+"px"}):i>p&&y.addClass("flip-future").css({"z-index":a.length-i,left:i*C/2+h+"px"})}l.css({"z-index":a.length+1,left:m+"px"});var x=-1*(m+u/2-d/2)+"px";if(o){var b=e(".flip-past"),w=e(".flip-future");for(e(".flip-current").css("zoom","1.0"),i=0;i<b.length;i++)e(b[i]).css("zoom",100-5*(b.length-i)+"%");for(i=0;i<w.length;i++)e(w[i]).css("zoom",100-5*(i+1)+"%");t.animate({left:x},333)}else t.css("left",x)}l.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden"),v(),g(),n.onItemSwitch.call(this)}function y(e){a.length>1&&("left"===e?p>0?p--:p=a.length-1:"right"===e?p<a.length-1?p++:p=0:p="number"==typeof e?e:a.index(e),m())}c.hasClass("flipster-active")||function(){c.addClass("flipster flipster-active flipster-"+n.style).css("visibility","hidden"),t=c.find(n.itemContainer).addClass("flip-items"),a=t.find(n.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />");var i=document.createElement("b");i.innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1===i.getElementsByTagName("i").length&&(o=!0,t.addClass("compatibility")),function(){if(n.enableNav&&a.length>1){var t=[],i=[],l=[];for(var f in a.each(function(){var n=e(this).data("flip-category"),a=e(this).attr("id"),s=e(this).attr("title");void 0!==n&&e.inArray(n,t)<0&&(t.push(n),l[n]='<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="'+n+'">'+n+'</a>\n<ul class="flip-nav-items">\n'),e.inArray(a,i)<0&&(i.push(a),link='<a href="#'+a+'" class="flip-nav-item-link">'+s+"</a></li>\n",void 0!==n?l[n]=l[n]+'<li class="flip-nav-item">'+link:l[a]='<li class="flip-nav-item no-category">'+link)}),navDisplay='<ul class="flipster-nav">\n',t)l[t[f]]=l[t[f]]+"</ul>\n</li>\n";for(var o in l)navDisplay+=l[o];navDisplay+="</ul>",s=e(navDisplay).prependTo(c),r=s.find("a").on("click",function(t){var i;(i=e(this).hasClass("flip-nav-category-link")?a.filter("[data-flip-category='"+e(this).data("flip-category")+"']"):e(this.hash)).length&&(y(i),t.preventDefault())})}}(),n.enableNavButtons&&a.length>1&&(c.find(".flipto-prev, .flipto-next").remove(),c.append("<a href='#' class='flipto-prev'>Previous</a> <a href='#' class='flipto-next'>Next</a>"),c.children(".flipto-prev").on("click",function(e){y("left"),e.preventDefault()}),c.children(".flipto-next").on("click",function(e){y("right"),e.preventDefault()})),n.start&&a.length>1&&(p="center"===n.start?!a.length%2?a.length/2+1:Math.floor(a.length/2):n.start),v(),c.hide().css("visibility","visible").fadeIn(400,function(){m()}),l.resize(function(){v(),m()}),a.on("click",function(t){e(this).hasClass("flip-current")||t.preventDefault(),y(a.index(this))}),n.enableKeyboard&&a.length>1&&(l.on("keydown.flipster",function(e){if(++d%7==0||1===d){var t=e.which;37===t?(e.preventDefault(),y("left")):39===t&&(e.preventDefault(),y("right"))}}),l.on("keyup.flipster",function(e){d=0})),n.enableMousewheel&&a.length>1&&c.on("mousewheel.flipster",function(e){f=window.setTimeout(u,500),++d%4!=0&&1!==d||(window.clearTimeout(f),e.originalEvent.wheelDelta/120>0?y("left"):y("right"),e.preventDefault())}),n.enableTouch&&a.length>1&&(c.on("touchstart.flipster",function(e){h=e.originalEvent.targetTouches[0].screenX}),c.on("touchmove.flipster",function(e){e.preventDefault();var t=e.originalEvent.targetTouches[0].screenX,i=t-h;i>a[0].clientWidth/1.75?(y("left"),h=t):i<a[0].clientWidth/1.75*-1&&(y("right"),h=t)}),c.on("touchend.flipster",function(e){h=0}))}()})}}(jQuery);